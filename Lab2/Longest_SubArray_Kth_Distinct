import java.util.*;

public class LongestKDistinct {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int N = sc.nextInt();
        int K = sc.nextInt();
        int[] arr = new int[N];
        for (int i = 0; i < N; i++) {
            arr[i] = sc.nextInt();
        }

        Map<Integer, Integer> map = new HashMap<>();
        int p1 = 0;
        int maxLen = 0;

        for (int p2 = 0; p2 < N; p2++) {
            map.put(arr[p2], map.getOrDefault(arr[p2], 0) + 1);

            while (map.size() > K) {
                map.put(arr[p1], map.get(arr[p1]) - 1);
                if (map.get(arr[p1]) == 0) {
                    map.remove(arr[p1]);
                }
                p1++;
            }
            maxLen = Math.max(maxLen, p2 - p1 + 1);
        }

        System.out.println(maxLen);
    }
}

/*
The first line contains two integers ğ‘ and ğ¾ â€” the size of the array and 
the maximum number of distinct elements allowed
        input
        4 1
        2 1 2 4
        output
        1
 ----------------------      
        input
        6 2
        6 6 5 6 1 2
        output
        4

 */
